From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Lucius Hu <orctarorga@gmail.com>
Date: Tue, 4 Jun 2019 22:52:45 -0400
Subject: [PATCH] Corrected path to `/usr/share/defaults/etc/shells`

---
 Completion/Unix/Command/_chsh       | 4 ++--
 Completion/Unix/Command/_su         | 2 +-
 Completion/Unix/Command/_user_admin | 4 ++--
 3 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/Completion/Unix/Command/_chsh b/Completion/Unix/Command/_chsh
index 006aa82..2cadee2 100644
--- a/Completion/Unix/Command/_chsh
+++ b/Completion/Unix/Command/_chsh
@@ -38,7 +38,7 @@ case $OSTYPE in
       suse|util-linux)
 	shells=( $(_call_program shells $words[1] -l) )
         args+=(
-	  '(-)'{-l,--list-shells}'[print shells in /etc/shells]'
+	  '(-)'{-l,--list-shells}'[print shells in /usr/share/defaults/etc/shells]'
 	  '(-)'{-v,--version}'[display version information]'
         )
 	help=u
@@ -63,5 +63,5 @@ case $OSTYPE in
   ;;
 esac
 
-(( $#shells )) || shells=( ${(Z+Cn+)"$(</etc/shells)"} )
+(( $#shells )) || shells=( ${(Z+Cn+)"$(</usr/share/defaults/etc/shells)"} )
 _arguments $args '1:user name:_users'
diff --git a/Completion/Unix/Command/_su b/Completion/Unix/Command/_su
index 9009056..43af3c6 100644
--- a/Completion/Unix/Command/_su
+++ b/Completion/Unix/Command/_su
@@ -68,7 +68,7 @@ fi
 
 case $state in
   shells)
-    _wanted -C $context shells expl shell compadd ${(f)^"$(</etc/shells)"}(N)
+    _wanted -C $context shells expl shell compadd ${(f)^"$(</usr/share/defaults/etc/shells)"}(N)
     return
   ;;
   rest)
diff --git a/Completion/Unix/Command/_user_admin b/Completion/Unix/Command/_user_admin
index fe28c13..a3ab731 100644
--- a/Completion/Unix/Command/_user_admin
+++ b/Completion/Unix/Command/_user_admin
@@ -6,8 +6,8 @@ local defex
 # this handles solaris, netbsd, openbsd and linux
 case ${service%???}:${(M)service%???}:$OSTYPE in
   user:*)
-    if [[ -r /etc/shells ]]; then
-      shells=( ${${(f)"$(</etc/shells)"}:#\#*} )
+    if [[ -r /usr/share/defaults/etc/shells ]]; then
+      shells=( ${${(f)"$(</usr/share/defaults/etc/shells)"}:#\#*} )
     else
       shells=( ${(M)commands:#*/(|[abckz]|tc|ba)sh} )
     fi
-- 
https://clearlinux.org

